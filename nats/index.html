


<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="This module provides the capability to connect with NATS and NATS Streaming servers and performs the
below functionalities.
">
    <meta name="keywords" content="ballerina,ballerina lang,api docs,nats">

    <title>API Docs - ballerina/nats</title>

    <script src="../html-template-resources/jquery.min.js"></script>
    <link rel="stylesheet" href="../html-template-resources/semantic.min.css">
    <link rel="stylesheet" href="../html-template-resources/components/icon.min.css">
    <link rel="stylesheet" href="../html-template-resources/styles/css/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.14.0/themes/prism.min.css" rel="stylesheet" />
    <script src="../html-template-resources/semantic.min.js"></script>

</head>


<body>
    <div class="pusher">
        <div class="mobile-logo-div">
            <div class="ui secondary menu">
                <a href="../index.html">
                    <img class="mobile-logo" src="../html-template-resources/images/ballerina-logo.png">
                </a>
                <div class="right item">
                    <button class="ui icon button" onclick="toggleMenu()">
                     <i class="large bars icon"></i>
                    </button>
                </div>
            </div>
        </div>

        <div class="toc">
            <div class="ui visible left vertical sidebar menu">
                <a href="
                    ../index.html">
                    <img class="logo" src="../html-template-resources/images/ballerina-logo.png">
                </a>
                
                    
                    <div class="header">
                        <a class="capitalize" href="../nats/index.html">
                            nats Module
                        </a>
                    </div>
                    <div class="menu">
    
        
            <a class="item" data="records" href="../nats/index.html#records">Records</a>
        
    
    
        
            <a class="item" data="objects" href="../nats/index.html#objects">Objects</a>
        
    
    
        <a class="item" data="clients" href="../nats/index.html#clients">Clients</a>
    
    
        <a class="item" data="listeners" href="../nats/index.html#listeners">Listeners</a>
    
    
    
        <a class="item" data="constants" href="../nats/index.html#constants">Constants</a>
    
    
        <a class="item" data="annotations" href="../nats/index.html#annotations">Annotations</a>
    
    
        <a class="item" ata="types" href="../nats/index.html#types">Types</a>
    
    
        <a class="item" data="errors" href="../nats/index.html#errors">Errors</a>
    
    <div class="ui divider"></div>
</div>

                    <div class="header capitalize">
                        Other Modules
                    </div>
                    <div id="modules-list" class="menu"></div>
                    <div class="ui divider"></div>
                
            </div>
        </div>

        <div class="content">
            <div class="row nav-bar">
                <div class="ui secondary menu">
                    <div class="search-bar">
                        <div class="ui category search item search-bar">
                            <i class="search link icon"></i>
                            <div class="ui transparent icon input">
                                <input class="prompt" id="searchBox" type="text" placeholder="Search API Docs..."/>
                            </div>
                        </div>
                    </div>
                    <div class="right menu">
                        <a class="item active">Learn</a>
                        <a class="item">Events</a>
                        <a class="item">Central</a>
                        <a class="item">Community</a>
                        <a class="item">Blog</a>
                        <div class="ui dropdown item ballerina" id="version-picker">
                            Version
                            <i class="dropdown icon"></i>
                            <div class="menu">
                                <a class="item" value="1.0">1.0</a>
                                <a class="item" value="1.1">1.1</a>
                                <a class="item" value="1.2">1.2</a>
                                <a class="item" value="swan-lake">Swan Lake</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="main-content">
                <div id="mobMenu" class="mob-menu">
                    <div class="ui stackable secondary menu">
                        <div class="item">
                            <div class="search-bar">
                                <div class="ui category search item search-bar">
                                    <i class="search link icon"></i>
                                    <div class="ui transparent icon input">
                                        <input class="prompt" id="searchBoxMob" type="text" placeholder="Search API Docs..."/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                            
                            <div class="ui dropdown item capitalize">
                                nats Module <i class="dropdown icon"></i>
                                <div class="menu">
    
        
            <a class="item" data="records" href="../nats/index.html#records">Records</a>
        
    
    
        
            <a class="item" data="objects" href="../nats/index.html#objects">Objects</a>
        
    
    
        <a class="item" data="clients" href="../nats/index.html#clients">Clients</a>
    
    
        <a class="item" data="listeners" href="../nats/index.html#listeners">Listeners</a>
    
    
    
        <a class="item" data="constants" href="../nats/index.html#constants">Constants</a>
    
    
        <a class="item" data="annotations" href="../nats/index.html#annotations">Annotations</a>
    
    
        <a class="item" ata="types" href="../nats/index.html#types">Types</a>
    
    
        <a class="item" data="errors" href="../nats/index.html#errors">Errors</a>
    
    <div class="ui divider"></div>
</div>

                            </div>
                            <div class="ui dropdown item">
                                Other Modules <i class="dropdown icon"></i>
                                <div id="modules-list-mob" class="menu"></div>
                            </div>
                        

                            <div class="ui dropdown item" id="version-picker-mob">
                                Version <i class="dropdown icon"></i>
                                <div class="menu">
                                    <a class="item" value="1.0">1.0</a>
                                    <a class="item" value="1.1">1.1</a>
                                    <a class="item" value="1.2">1.2</a>
                                    <a class="item" value="swan-lake">Swan Lake</a>
                                </div>
                            </div>
                            <div class="ui dropdown item ballerina">
                                Ballerina <i class="dropdown icon"></i>
                                <div class="menu">
                                    <a class="item active">Learn</a>
                                    <a class="item">Events</a>
                                    <a class="item">Central</a>
                                    <a class="item">Community</a>
                                </div>
                            </div>

                    </div>
                </div>
                <div id="search-impl"></div>
                <div id="main">
                    
                        <div class="ui breadcrumb">
                            <a class="section" href="
                                 ../index.html">Modules</a>
                            <i class="right angle icon divider"></i>
                            <a class="section capitalize active" href="../nats/index.html">nats</a>
                            
                        </div>
                    

                    <div class="ui very padded segment module-data">
                            <h1 class="capitalize">
    Module: nats

                            
                            </h1>
                        
    <h2>ballerina/nats:1.0.0</h2>
    <h2>Module Overview</h2>
<p>This module provides the capability to connect with NATS and NATS Streaming servers and performs the
below functionalities.</p>
<ul>
<li>Point to point communication (Queues)</li>
<li>Pub/Sub (Topics)</li>
<li>Request/Reply</li>
</ul>
<h3>Basic Usage</h3>
<h4>Setting up the connection</h4>
<p>First step is setting up the connection with the NATS Basic/Streaming server. The following ways can be used to connect to a
NATS Basic/Streaming server.</p>
<ol>
<li>Connect to a server using the URL</li>
</ol>
<pre><code class="language-ballerina">nats:Connection connection = new(&quot;nats://localhost:4222&quot;);
</code></pre>
<ol start="2">
<li>Connect to one or more servers with a custom configuration</li>
</ol>
<pre><code class="language-ballerina">nats:Connection connection = new(&quot;nats://serverone:4222, nats://servertwo:4222&quot;,  config);
</code></pre>
<h4>Publishing messages</h4>
<p>Publishing messages is handled differently in the NATS Basic server and Streaming server. The 'ballerina/nats' module provides different
APIs to publish messages to each server.</p>
<h5>Publishing messages to the NATS basic server</h5>
<p>Once connected, publishing is accomplished via one of the below two methods.</p>
<ol>
<li>Publish with the subject and the message content.</li>
</ol>
<pre><code class="language-ballerina">nats:Producer producer = new(connection);
nats:Error? result = producer-&gt;publish(subject, &quot;hello world&quot;);
</code></pre>
<ol start="2">
<li>Publish as a request that expects a reply.</li>
</ol>
<pre><code class="language-ballerina">nats:Producer producer = new(connection);
nats:Message|nats:Error reqReply = producer-&gt;request(subject, &quot;hello world&quot;, 5000);
</code></pre>
<ol start="3">
<li>Publish messages with a replyTo subject</li>
</ol>
<pre><code class="language-ballerina">nats:Producer producer = new(connection);
nats:Error? result = producer-&gt;publish(subject, &lt;@untainted&gt;message, 
                         replyToSubject);
</code></pre>
<ol start="4">
<li>Publish messages with a replyTo callback service</li>
</ol>
<pre><code class="language-ballerina">nats:Producer producer = new(connection);
nats:Error? result = producer-&gt;publish(subject, &lt;@untainted&gt;message, 
                         replyToService);
</code></pre>
<pre><code class="language-ballerina">service replyToService =
@nats:SubscriptionConfig {
    subject: &quot;replySubject&quot;
}
service {

    resource function onMessage(nats:Message msg, string data) {
    }

    resource function onError(nats:Message msg, nats:Error err) {
    }
};
</code></pre>
<h5>Publishing messages to a NATS streaming server</h5>
<p>Once connected to a streaming server, publishing messages is accomplished using the following method.</p>
<pre><code class="language-ballerina">nats:StreamingProducer producer = new(connection);
string|error result = producer-&gt;publish(subject, &quot;hello world&quot;);
</code></pre>
<blockquote>
<p>Publish api supports the <code>byte[], boolean, string, int, float, decimal, xml, json, record {}</code> message types.</p>
</blockquote>
<h4>Listening to incoming messages</h4>
<p>The Ballerina NATS module provides the following mechanisms to listen to messages. Similar to message publishing, listening to messages
is also handled differently in the NATS basic and streaming servers.</p>
<h5>Listening to messages from a NATS server</h5>
<pre><code class="language-ballerina">// Initializes the NATS listener.
listener nats:Listener subscription = new(connection);

// Binds the consumer to listen to the messages published to the 'demo' subject.
@nats:SubscriptionConfig {
    subject: &quot;demo&quot;
}
service demo on subscription {

    resource function onMessage(nats:Message msg, string data) {
    }

    resource function onError(nats:Message msg, nats:Error err) {
    }
}
</code></pre>
<h5>Listening to messages from a Streaming server</h5>
<pre><code class="language-ballerina">// Initializes the NATS Streaming listener.
listener nats:StreamingListener subscription = new(conn, &quot;test-cluster&quot;, &quot;c1&quot;);

// Binds the consumer to listen to the messages published to the 'demo' subject.
@nats:StreamingSubscriptionConfig {
    subject: &quot;demo&quot;
}
service demo on subscription {

    resource function onMessage(nats:StreamingMessage msg, string data) {
    }

    resource function onError(nats:StreamingMessage msg, nats:Error err) {
    }

}
</code></pre>
<h3>Advanced Usage</h3>
<h4>Using the TLS protocol</h4>
<p>The Ballerina NATS module allows the use of the tls:// protocol in its URLs. This setting expects a secure socket to be
set in the connection configuration as shown below.</p>
<pre><code class="language-ballerina">nats:ConnectionConfig config = {
    secureSocket : {
        trustStore : {
            path: &quot;nats-basic/keyStore.p12&quot;,
            password: &quot;xxxxx&quot;
        }
    }
};

// Initializes a connection.
nats:Connection connection = new(&quot;tls://localhost:4222&quot;, config = config);
</code></pre>
<blockquote>
<p><strong>Note:</strong> The default thread pool size used in Ballerina is the number of processors available * 2. You can configure the thread pool size by using the <code>BALLERINA_MAX_POOL_SIZE</code> environment variable.</p>
</blockquote>
<p>For information on the operations, which you can perform with this module, see the below <strong>Functions</strong>.</p>
<p>For examples on the usage of the connector, see the following.</p>
<ul>
<li><a href="https://ballerina.io/swan-lake/learn/by-example/nats-basic-client.html">Basic Publisher and Subscriber Example</a>.</li>
<li><a href="https://ballerina.io/swan-lake/learn/by-example/nats-streaming-client.html">Basic Streaming Publisher and Subscriber Example</a></li>
<li><a href="https://ballerina.io/swan-lake/learn/by-example/nats-streaming-consumer-with-data-binding.html">Streaming Publisher and Subscriber With Data Binding Example</a></li>
<li><a href="https://ballerina.io/swan-lake/learn/by-example/nats-streaming-durable-subscriptions.html">Durable Subscriptions Example</a></li>
<li><a href="https://ballerina.io/swan-lake/learn/by-example/nats-streaming-queue-group.html">Queue Groups Example</a></li>
<li><a href="https://ballerina.io/swan-lake/learn/by-example/nats-streaming-start-position.html">Historical Message Replay Example</a></li>
</ul>


    
        
            <section id="records">
                <div class="main-method-title here">
                    <a class="url-link" href="#records">
                        <img class="url-link-img" src="../html-template-resources/images/link.svg">
                    </a>
                    <h2> Records </h2>
                    <p>[6]</p>
                </div>
                <div class="ui divider"></div>
                <table class="ui very basic table">
                    
                    
                    <tr>
                        <td class="module-title truncate records" id="ConnectionConfig" title="ConnectionConfig">
                            <a class="records " href="records/ConnectionConfig.html">ConnectionConfig</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>Configurations related to creating a NATS streaming subscription.
                        </td>
                    </tr>
                    
                    
                    
                    <tr>
                        <td class="module-title truncate records" id="PendingLimits" title="PendingLimits">
                            <a class="records " href="records/PendingLimits.html">PendingLimits</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>The configurations to set limits on the maximum number of messages or maximum size of messages this consumer will
hold before it starts to drop new messages waiting for the resource functions to drain the queue.
                        </td>
                    </tr>
                    
                    
                    
                    <tr>
                        <td class="module-title truncate records" id="SecureSocket" title="SecureSocket">
                            <a class="records " href="records/SecureSocket.html">SecureSocket</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>Configurations related to facilitating a secure communication with a remote HTTP endpoint.
                        </td>
                    </tr>
                    
                    
                    
                    <tr>
                        <td class="module-title truncate records" id="StreamingConfig" title="StreamingConfig">
                            <a class="records " href="records/StreamingConfig.html">StreamingConfig</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>Configuration related to establishing a streaming connection.
                        </td>
                    </tr>
                    
                    
                    
                    <tr>
                        <td class="module-title truncate records" id="StreamingSubscriptionConfigData" title="StreamingSubscriptionConfigData">
                            <a class="records " href="records/StreamingSubscriptionConfigData.html">StreamingSubscriptionConfigData</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>The configurations for the NATS streaming subscription.
                        </td>
                    </tr>
                    
                    
                    
                    <tr>
                        <td class="module-title truncate records" id="SubscriptionConfigData" title="SubscriptionConfigData">
                            <a class="records " href="records/SubscriptionConfigData.html">SubscriptionConfigData</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>The configurations for the NATS basic subscription.
                        </td>
                    </tr>
                    
                    
                </table>
            </section>
        
    

    
        
            <section id="objects">
                <div class="main-method-title here">
                    <a class="url-link" href="#objects">
                        <img class="url-link-img" src="../html-template-resources/images/link.svg">
                    </a>
                    <h2> Objects </h2>
                    <p>[2]</p>
                </div>
                <div class="ui divider"></div>
                <table class="ui very basic table">
                    
                    
                    <tr>
                        <td class="module-title truncate objects" id="Connection" title="Connection">
                            <a class="objects " href="objects/Connection.html">Connection</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>Represents a single network connection to the NATS server.
                        </td>
                    </tr>
                    
                    
                    
                    <tr>
                        <td class="module-title truncate objects" id="Message" title="Message">
                            <a class="objects " href="objects/Message.html">Message</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>Represents the message, which a NATS server sends to its subscribed services.
                        </td>
                    </tr>
                    
                    
                </table>
            </section>
        
    

    
    <section id="clients">
        <div class="main-method-title here">
            <a class="url-link" href="#clients">
                <img class="url-link-img" src="../html-template-resources/images/link.svg">
            </a>
            <h2> Clients </h2>
            <p>[3]</p>
        </div>
        <div class="ui divider"></div>
        <table class="ui very basic table">
            
            <tr>
                <td class="module-title truncate clients" id="Producer" title="Producer">
                    <a class="clients " href="clients/Producer.html">Producer</a>
                </td>
                <td class="module-desc">
                    
                    <p>The producer provides the capability to publish messages to the NATS server.
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate clients" id="StreamingMessage" title="StreamingMessage">
                    <a class="clients " href="clients/StreamingMessage.html">StreamingMessage</a>
                </td>
                <td class="module-desc">
                    
                    <p>Represents the message a NATS Streaming Server sends to its subscribed services.
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate clients" id="StreamingProducer" title="StreamingProducer">
                    <a class="clients " href="clients/StreamingProducer.html">StreamingProducer</a>
                </td>
                <td class="module-desc">
                    
                    <p>The streaming producer provides the capability to publish messages to the NATS streaming server.
                </td>
            </tr>
            
        </table>
    </section>
    

    
    <section id="listeners">
        <div class="main-method-title here">
            <a class="url-link" href="#listeners">
                <img class="url-link-img" src="../html-template-resources/images/link.svg">
            </a>
            <h2> Listeners </h2>
            <p>[2]</p>
        </div>
        <div class="ui divider"></div>
        <table class="ui very basic table">
            
            <tr>
                <td class="module-title truncate listeners" id="Listener" title="Listener">
                    <a class="listeners " href="listeners/Listener.html">Listener</a>
                </td>
                <td class="module-desc">
                    
                    <p>Represents the NATS server connection to which a subscription service should be bound in order to
receive messages of the corresponding subscription.
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate listeners" id="StreamingListener" title="StreamingListener">
                    <a class="listeners " href="listeners/StreamingListener.html">StreamingListener</a>
                </td>
                <td class="module-desc">
                    
                    <p>Represents the NATS streaming server connection to which a subscription service should be bound in order to
receive messages of the corresponding subscription.
                </td>
            </tr>
            
        </table>
    </section>
    


    


    
    <section id="constants">
        <div class="main-method-title here">
            <a class="url-link" href="#constants">
                <img class="url-link-img" src="../html-template-resources/images/link.svg">
            </a>
            <h2> Constants </h2>
            <p>[6]</p>
        </div>
        <div class="ui divider"></div>
        <table class="ui very basic table">
            
            <tr>
                <td class="module-title truncate constant" id="DEFAULT_URL" title="DEFAULT_URL">
                    <a class="constant " href="constants.html#DEFAULT_URL">DEFAULT_URL</a>
                </td>
                <td class="module-desc">
                    
                    <p>Default URL for NATS connections.
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate constant" id="NEW_ONLY" title="NEW_ONLY">
                    <a class="constant " href="constants.html#NEW_ONLY">NEW_ONLY</a>
                </td>
                <td class="module-desc">
                    
                    <p>Specifies that message delivery should start with the messages, which are published after the subscription is created.
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate constant" id="LAST_RECEIVED" title="LAST_RECEIVED">
                    <a class="constant " href="constants.html#LAST_RECEIVED">LAST_RECEIVED</a>
                </td>
                <td class="module-desc">
                    
                    <p>Specifies that message delivery should start with the last (most recent) message stored for this subject.
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate constant" id="FIRST" title="FIRST">
                    <a class="constant " href="constants.html#FIRST">FIRST</a>
                </td>
                <td class="module-desc">
                    
                    <p>Specifies that message delivery should begin with the oldest available message for this subject.
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate constant" id="TIME_DELTA_START" title="TIME_DELTA_START">
                    <a class="constant " href="constants.html#TIME_DELTA_START">TIME_DELTA_START</a>
                </td>
                <td class="module-desc">
                    
                    <p>The key for the <code>TimeDeltaStart</code> type.
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate constant" id="SEQUENCE_NUMBER" title="SEQUENCE_NUMBER">
                    <a class="constant " href="constants.html#SEQUENCE_NUMBER">SEQUENCE_NUMBER</a>
                </td>
                <td class="module-desc">
                    
                    <p>The key for the <code>SequenceNumber</code> type.
                </td>
            </tr>
            
        </table>
    </section>
    


    
    <section id="annotations">
        <div class="main-method-title here">
            <a class="url-link" href="#annotations">
                <img class="url-link-img" src="../html-template-resources/images/link.svg">
            </a>
            <h2> Annotations </h2>
            <p>[2]</p>
        </div>
        <div class="ui divider"></div>
        <table class="ui very basic table">
            
            <tr>
                <td class="module-title truncate annotations" id="StreamingSubscriptionConfig" title="StreamingSubscriptionConfig">
                    <a class="annotations " href="annotations.html#StreamingSubscriptionConfig">StreamingSubscriptionConfig</a>
                </td>
                <td class="module-desc">
                    
                    <p>The annotation, which is used to configure the streaming subscription.
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate annotations" id="SubscriptionConfig" title="SubscriptionConfig">
                    <a class="annotations " href="annotations.html#SubscriptionConfig">SubscriptionConfig</a>
                </td>
                <td class="module-desc">
                    
                    <p>The annotation, which is used to configure the basic subscription.
                </td>
            </tr>
            
        </table>
    </section>
    

    
    <section id="types">
        <div class="main-method-title here">
            <a class="url-link" href="#types">
                <img class="url-link-img" src="../html-template-resources/images/link.svg">
            </a>
            <h2> Types </h2>
            <p>[5]</p>
        </div>
        <div class="ui divider"></div>
        <table class="ui very basic table">
            
                <tr>
                    <td class="module-title truncate types" id="Content" title="Content">
                        <a class="types " href="types.html#Content">Content</a>
                    </td>
                    <td class="module-desc">
                        
                        <p>Data types supported when publishing and consuming messages.
                    </td>
                </tr>
            
                <tr>
                    <td class="module-title truncate types" id="Error" title="Error">
                        <a class="types " href="types.html#Error">Error</a>
                    </td>
                    <td class="module-desc">
                        
                        <p>The union of the NATS module related errors.
                    </td>
                </tr>
            
                <tr>
                    <td class="module-title truncate types" id="SequenceNumber" title="SequenceNumber">
                        <a class="types " href="types.html#SequenceNumber">SequenceNumber</a>
                    </td>
                    <td class="module-desc">
                        
                        <p>Specifies that message delivery should start at the given sequence number.
                    </td>
                </tr>
            
                <tr>
                    <td class="module-title truncate types" id="StartPosition" title="StartPosition">
                        <a class="types " href="types.html#StartPosition">StartPosition</a>
                    </td>
                    <td class="module-desc">
                        
                        <p>Specifies the position to start receiving messages.
                    </td>
                </tr>
            
                <tr>
                    <td class="module-title truncate types" id="TimeDeltaStart" title="TimeDeltaStart">
                        <a class="types " href="types.html#TimeDeltaStart">TimeDeltaStart</a>
                    </td>
                    <td class="module-desc">
                        
                        <p>Specifies that message delivery should start with a given historical time delta (from now).
                    </td>
                </tr>
            
            
        </table>
    </section>
    

    
    <section id="errors">
        <div class="main-method-title here">
            <a class="url-link" href="#errors">
                <img class="url-link-img" src="../html-template-resources/images/link.svg">
            </a>
            <h2> Errors </h2>
            <p>[1]</p>
        </div>
        <div class="ui divider"></div>
        <table class="ui very basic table">
            
            <tr>
                <td class="module-title truncate errors" id="NatsError" title="NatsError">
                    <a class="errors " href="errors.html#NatsError">NatsError</a>
                </td>
                <td class="module-desc">
                    
                    <p>Represents the NATS module related errors.
                </td>
            </tr>
            
        </table>
    </section>
    

                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.14.0/components/prism-core.min.js"></script>
<script src="../syntax-highlighter/prism-ballerina.js"></script>
<script>
    function toggleMenu() {
        $('#mobMenu').transition('slide down')
    }
    $(document).ready(function () {
        $('.ui.dropdown').dropdown();
        $('#version-picker').dropdown('set selected', "1.2");
        $('#version-picker-mob').dropdown('set selected', "1.2");

    });

    let mainNavLinks = document.querySelectorAll(".toc .ui.visible.left.vertical.sidebar.menu .menu a");
    console.log(mainNavLinks);
    let contentWrapper = document.querySelector(".content");
    contentWrapper.addEventListener("scroll", event => {
      let fromTop = contentWrapper.scrollTop;

      mainNavLinks.forEach(link => {
        let section = document.querySelector("#" + link.attributes.getNamedItem("data").textContent);

        if (
          section.offsetTop <= fromTop &&
          section.offsetTop + section.offsetHeight > fromTop
        ) {
          link.classList.add("active");
        } else {
          link.classList.remove("active");
        }
      });
    });

</script>
<script>
    var rootPath = "../";
</script>
<script src="../doc-search/search-data.js"></script>
<script src="../doc-search/search.js"></script>
<script>
    var str = "";
    var currentModule = "nats";
    searchData.modules.forEach(function(module) {
        var active = "";
        if (currentModule==module.id) {
            active = " active";
        }
        str += '<a class="item' + active + '" href="' + rootPath + module.id + '/index.html">' + module.id + '</a>';
    });
    document.getElementById("modules-list").innerHTML = str;
    document.getElementById("modules-list-mob").innerHTML = str;
</script>



